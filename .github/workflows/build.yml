name: Maven Package Build

on:
  push:
    branches:
      - 'master'
    tags:
      - 'test*'
jobs:

  test:
    name: Build And Publish
    runs-on: ubuntu-18.04

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
          
      - name: Print Version
        run: |
          ls
          pwd
          version=$(./myBash.sh)
          echo $version

      - name: Unit Test
        run: gradle test

      - name: Gradle Publish
        run: |
          gradle build
          gradle -Pgpr.user=nachiappannk -Pgpr.key=${{ secrets.GITHUB_TOKEN }} publish
